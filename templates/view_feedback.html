{% extends "base.html" %}
{% block content %}
<style>
body {
    background-color: #290c3d; /* fallback color */
    background-image: url("{{ url_for('static', filename='bg.jpg') }}");
    background-repeat: no-repeat;
    background-size: cover;   /* cover full screen */
    background-attachment: fixed; /* keeps the image in place */
    font-family: 'Cinzel', serif;
}

  .feedback-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 50px 0;
  }

  .card {
    background: rgba(108, 102, 20, 0.7);
    color: #fff;
    border-radius: 12px;
    border: 3px solid #e6c200;
    box-shadow: 0 0 20px rgba(230, 194, 0, 0.5);
    width: 900px; /* rectangle width */
    min-height: 220px; /* rectangle height */
  }

  .card h5 {
    color: #ffd700;
    text-align: center;
    font-weight: 700;
    letter-spacing: 1px;
    margin-bottom: 20px;
  }

  .list-group-item {
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
    border: 1px solid #e6c200;
    border-radius: 8px;
    margin-bottom: 8px;
    transition: 0.3s;
  }
  .list-group-item:hover {
    background: rgba(255, 215, 0, 0.1);
    transform: scale(1.02);
  }

  .small.text-muted {
    color: #ffdd88 !important;
    font-style: italic;
  }

  .btn-outline-success,
  .btn-outline-primary {
    border: 2px solid #ffd700;
    color: #ffd700;
    font-weight: 600;
  }
  .btn-outline-success:hover,
  .btn-outline-primary:hover {
    background: linear-gradient(135deg, #ffd700, #e6c200);
    color: #451c55;
    box-shadow: 0 0 15px rgba(230, 194, 0, 0.9);
  }

  .btn-primary {
    background: linear-gradient(135deg, #ffd700, #e6c200);
    border: none;
    color: #451c55;
    font-weight: 600;
    transition: 0.3s ease;
  }
  .btn-primary:hover {
    background: linear-gradient(135deg, #e6c200, #ffd700);
    box-shadow: 0 0 15px rgba(230, 194, 0, 0.9);
    transform: scale(1.05);
  }

  .btn-outline-secondary {
    border: 2px solid #aaa;
    color: #ddd;
  }
  .btn-outline-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
  }

  h6 {
    color: #ffd700;
    font-weight: bold;
    text-align: center;
  }
</style>

<div class="feedback-wrapper">
  <!-- Feedbacks Given -->
  <div class="card">
    <div class="card-body">
      <h5>Feedbacks you gave</h5>
      {% if given %}
        <ul class="list-group">
          {% for f in given %}
            <li class="list-group-item">
              <strong>To: {{ f.recipient.name }}</strong>
              <div class="small text-muted">{{ f.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
              <p class="mt-2">{{ f.content }}</p>
            </li>
          {% endfor %}
        </ul>
        <a class="btn btn-outline-success mt-3" href="{{ url_for('download_given_pdf') }}">Download PDF of feedbacks you gave</a>
      {% else %}
        <p class="text-muted">You haven't given any feedback yet.</p>
      {% endif %}
    </div>
  </div>

  <!-- Feedbacks Received -->
  <div class="card">
    <div class="card-body">
      <h5>Feedbacks received by you</h5>
      {% if received %}
        <ul class="list-group">
          {% for f in received %}
            <li class="list-group-item">
              <strong>From: {{ f.sender.name }}</strong>
              <div class="small text-muted">{{ f.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
              <p class="mt-2">{{ f.content }}</p>
            </li>
          {% endfor %}
        </ul>
        <a class="btn btn-outline-primary mt-3" href="{{ url_for('download_received_pdf') }}">Download PDF of feedbacks received</a>
      {% else %}
        <p class="text-muted">No feedbacks received yet.</p>
      {% endif %}
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="card p-3">
    <h6>Quick actions</h6>
    <a class="btn btn-sm btn-primary w-100 mb-2" href="{{ url_for('give_feedback') }}">Give more feedback</a>
    <a class="btn btn-sm btn-outline-secondary w-100" href="{{ url_for('dashboard') }}">Back to Dashboard</a>
  </div>
</div>
{% endblock %}
